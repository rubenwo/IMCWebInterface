version: '3'

services:
  client.web:
    build:
      dockerfile: ./client.web/Dockerfile
      context: .
    image: imc-web-interface-client
    volumes:
      - ./client.web:/usr/src/app
    ports:
      - 7000:80
    env_file:
      - ./.env 
    depends_on: 
      - service.auth
      - service.config

  service.auth:
    build:
      dockerfile: ./service.auth/Dockerfile
      context: .
    image: imc-web-interface-auth
    volumes:
      - .:/go/src/imc-web-interface
    ports:
      - 7001:80
    env_file:
      - ./.env 

  service.config:
    build:
      dockerfile: ./service.config/Dockerfile
      context: .
    image: imc-web-interface-config
    volumes:
      - .:/go/src/imc-web-interface
    ports:
      - 7002:80
    env_file:
      - ./.env 